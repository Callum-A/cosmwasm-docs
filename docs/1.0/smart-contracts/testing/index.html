<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="search" type="application/opensearchdescription+xml" title="CosmWasm Documentation" href="/opensearch.xml"><title data-react-helmet="true">Testing | CosmWasm Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.cosmwasm.com/docs/1.0/smart-contracts/testing"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-react-helmet="true" property="og:title" content="Testing | CosmWasm Documentation"><meta data-react-helmet="true" name="description" content="At some point in Smart Contract development, everyone will arrive at tests. Tests are what give you and your protocol sleep at night and ensure changes can be rapidly deployed to the contracts codebase without breaking everything else."><meta data-react-helmet="true" property="og:description" content="At some point in Smart Contract development, everyone will arrive at tests. Tests are what give you and your protocol sleep at night and ensure changes can be rapidly deployed to the contracts codebase without breaking everything else."><link data-react-helmet="true" rel="icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.cosmwasm.com/docs/1.0/smart-contracts/testing"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/docs/1.0/smart-contracts/testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/fr/docs/1.0/smart-contracts/testing" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/docs/1.0/smart-contracts/testing" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.293cb3ed.css">
<link rel="preload" href="/assets/js/runtime~main.5276babc.js" as="script">
<link rel="preload" href="/assets/js/main.3f7f342e.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_aKYr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/1.0/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev-academy/intro">Dev Academy</a></li><li><a class="dropdown__link" href="/tutorials/hijack-escrow/intro">Tutorials</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">dApps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cw-plus/0.9.0/overview">cw-plus</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" docspluginid="ecosystem">Ecosystem</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ecosystem/overview">Overview</a></li><li><a class="dropdown__link" href="/ecosystem/jobs">Jobs</a></li><li><a class="dropdown__link" href="/ecosystem/testnets/build-requirements">Testnets</a></li><li><a class="dropdown__link" href="/ecosystem/hall-of-fame">Hall of Fame</a></li><li><a class="dropdown__link" href="/ecosystem/media/assets">Media</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/1.0/">1.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.0/smart-contracts/testing">1.0</a></li><li><a class="dropdown__link" href="/docs/0.16/">0.16</a></li><li><a class="dropdown__link" href="/docs/0.14/">0.14</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/1.0/smart-contracts/testing" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/fr/docs/1.0/smart-contracts/testing" target="_self" rel="noopener noreferrer" class="dropdown__link">FranÃ§ais</a></li></ul></div><div class="toggle_Pssr toggle_TdHA toggleChecked_cnQY toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" checked="" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_FJUI"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--dark_oUvU"></a><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/1.0/getting-started/intro">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/intro">Your First Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/setting-env">Setting Up Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/compile-contract">Downloading and Compiling Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/interact-with-contract">Uploading and Interacting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/next-steps">Next Steps</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/1.0/architecture/multichain">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/multichain">What are Multi-Chain Contracts?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/actor">Actor Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/addresses">Names and Addresses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/query">Querying</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/serialization">Serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/composition">Contract Composition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/architecture/smart-contracts">Comparison with Solidity Contracts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/1.0/smart-contracts/contract-semantics">Smart Contracts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/contract-semantics">Contract Semantics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/message">Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/result-option">Result and Option</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/1.0/smart-contracts/state/cw-plus">State</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/entry-points">Entry points</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/query">Query</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/events">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/math">Math</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/compilation">Compilation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/1.0/smart-contracts/frontend_app/introduction">Frontend App</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/verify">Verifying Smart Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/migration">Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/code-pinning">Code Pinning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.0/smart-contracts/testing">Testing</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0/integration">Integration</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->1.0</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Testing</h1><p>At some point in Smart Contract development, everyone will arrive at tests. Tests are what give you and your protocol sleep at night and ensure changes can be rapidly deployed to the contracts codebase without breaking everything else.</p><p>A great set of contracts will have a great set of tests generally divided into two areas of testing. Unit testing and Integration testing. </p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="unit-testing">Unit Testing<a class="hash-link" href="#unit-testing" title="Direct link to heading">â€‹</a></h2><p>See here for a <a href="https://docs.cosmwasm.com/tutorials/simple-option/testing" target="_blank" rel="noopener noreferrer">guide on unit testing</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="integration-testing-with-cw-multi-test">Integration Testing with <code>cw-multi-test</code><a class="hash-link" href="#integration-testing-with-cw-multi-test" title="Direct link to heading">â€‹</a></h2><p>The cw-multi-test package offered in the cw-plus repo provides an interesting way to test your smart contracts without going all the way to deploying them on a testnet. Before using multi-test the flow to me was to have some pipeline which would set up your contracts on a given chain (maybe testnet, maybe local) perform some tests and then if possible destroy/self-destruct the contracts.</p><p>All of that can be taken away almost in preference of cw-multi-test-based integration tests which enable you to test the flows and interactions between smart contracts. There is still a place for the flow described above but I have had a better experience writing these integration tests once you figure out the intricacies of multi-test. I hope to clear some of those intricacies up here with some tips, resources and steps.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="cw-multi-test-concepts"><code>cw-multi-test</code> concepts<a class="hash-link" href="#cw-multi-test-concepts" title="Direct link to heading">â€‹</a></h2><p>There are a few main concepts to understand before you will be able to  simulate a blockchain environment in Rust and run tests that involve contract -&gt; contract,
and contract -&gt; bank interactions.</p><p>In this section we will take a step-by-step look through writing a test with cw-multi-test, explaining some important concepts along the way.
To start we need a specimen contract such as the <a href="https://github.com/InterWasm/cw-template/blob/main/src/contract.rs" target="_blank" rel="noopener noreferrer">cw-template</a> which is a simple boilerplate contract containing two functions: <code>Increment</code> and <code>Reset</code>.</p><p>We start as we always start with a new test file with a few imports: </p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">use cosmwasm_std::testing::{mock_env, MockApi, MockQuerier, MockStorage, MOCK_CONTRACT_ADDR};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use cw_multi_test::{App, BankKeeper, Contract, ContractWrapper};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The above imports will give us a wide pallette of tools to start crafting a test from. The first import to look at here is <code>App</code> which will become the simulated blockchain environment in which our tests will be executed.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="app">App<a class="hash-link" href="#app" title="Direct link to heading">â€‹</a></h3><p>The main entry point to the system is called <code>App</code>, which represents a blockchain app.
It maintains an idea of block height and time, which you can update to simulate multiple
blocks. You can use <code>app.update_block(next_block)</code> to increment timestamp by 5s and height by 1
(simulating a new block) or you can write any other mutator to advance more.</p><p>It exposes an entry point <code>App.execute</code> that allows us to execute any <code>CosmosMsg</code>
and it wraps it as an atomic transaction. That is, only if <code>execute</code> returns success, will the state
be committed. It returns the data and a list of Events on successful execution or an <code>Err(String)</code>
on error. There are some helper methods tied to the <code>Executor</code> trait that create the <code>CosmosMsg</code> for
you to provide a less verbose API. <code>instantiate_contract</code>,<code>execute_contract</code>, and <code>send_tokens</code> are exposed
for your convenience in writing tests. Each execute one <code>CosmosMsg</code> atomically as if it was submitted by a user.
(You can also use <code>execute_multi</code> if you wish to run multiple message together that revert all state if any fail).</p><p>The other key entry point to <code>App</code> is the <code>Querier</code> interface that it implements. In particular, you
can use <code>App.wrap()</code> to get a <code>QuerierWrapper</code>, which provides all kinds of nice APIs to query the
blockchain, like <code>all_balances</code> and <code>query_wasm_smart</code>. Putting this together, you have one <code>Storage</code> wrapped
into an application, where you can execute contracts and bank, query them easily, and update the current
<code>BlockInfo</code>, in an API that is not very verbose or cumbersome. Under the hood it will process all messages
returned from contracts, move &quot;bank&quot; tokens and call into other contracts.</p><p>You can create an App for use in your test code like:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn mock_app() -&gt; App {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let env = mock_env();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let api = Box::new(MockApi::default());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let bank = BankKeeper::new();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    App::new(api, env.block, bank, Box::new(MockStorage::new()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="mocking-contracts">Mocking contracts<a class="hash-link" href="#mocking-contracts" title="Direct link to heading">â€‹</a></h3><p>Mocking your contracts is one of the mantras of multi-test but also one of the main obstacles to getting yourself a working test. First consider that whatever contract you want to test needs to be either mocked or wrapped up. <code>cw-multi-test</code> provides the <code>ContractWrapper</code> which allows you to wrap up the logical pieces of your contract (instantiate, executors, queries) and deploy it to a mocked network.</p><p>Mocking all your contracts and then testing one can be done in a scripting fashion but for maintainability I recommend trying to define all your wrapped contracts a functions so you can reuse them:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">use crate::contract::{execute, instantiate, query, reply};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn contract_stablecoin_exchanger() -&gt; Box&lt;dyn Contract&lt;Empty&gt;&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let contract = ContractWrapper::new_with_empty(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        execute,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        instantiate,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        query,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ).with_reply(reply);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Box::new(contract)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The above is a more complex example but lets break it down real quick.
We import the execute, instantiate, query and reply functions which are used at runtime by the contract and then make our own wrapper from them to be used in the tests. </p><blockquote><p>To reply or not reply</p><p>  Depending on the make up of your contract, when you go to create a ContractWrapper you may not need <code>with_reply</code> if your contract does not implement a <code>reply</code> function.</p></blockquote><p>After mocking out a contract, two more steps follow which are; storing the code and then setting up a contract from the code object. You will notice this is the exact same process for deploying to a testnet or mainnet chain whereas in unit tests you work with a mocked_env, using <code>mock_dependencies</code> and passing in <code>mock_info</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="storing-and-instantiating-a-contract">Storing and Instantiating a Contract:<a class="hash-link" href="#storing-and-instantiating-a-contract" title="Direct link to heading">â€‹</a></h3><p>Before a contract can be instantiated in a <code>cw-multi-test</code> environment, the contract first has to be stored. Once stored the contract can be instantiated using its associated <code>code_id</code></p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">let contract_code_id = router.store_code(contract_stablecoin_exchanger());</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Instantiating from the new code object:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">let mocked_contract_addr = router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .instantiate_contract(contract_code_id, owner.clone(), &amp;msg, &amp;[], &quot;super-contract&quot;, None)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .unwrap();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>All the above gives you 1 mocked contract. As you start to test you may see errors like</p><ul><li><code>No ContractData</code></li><li><code>Contract &#x27;&lt;contract&gt;&#x27; does not exist</code></li></ul><p>If you get any of these theres a good chance you a missing a mock. When in multi test land, everything you interact with that can be considered a contract needs to be mocked out. That includes your own simple little utility contract you don&#x27;t intend to test right now as well as any services your contract interacts with.</p><p>Look at your contract and see if you are passing in any dummy contract addresses, thats the most likely cause. If you find any you must; mock it out with the above method; instantiate it with the above method; capture the address and pass that instead of a dummy one.
Took me a while to get a complex contract fully mocked out but hopefully this helps you. Now for the next glaring problem I faced. Mocking other services!!</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="putting-it-all-together">Putting it all together<a class="hash-link" href="#putting-it-all-together" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">use cosmwasm_std::testing::{mock_env, MockApi, MockQuerier, MockStorage, MOCK_CONTRACT_ADDR};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use cw_multi_test::{App, BankKeeper, Contract, ContractWrapper};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use crate::contract::{execute, instantiate, query, reply};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use crate::msg::{InstantiateMsg, QueryMsg}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn mock_app() -&gt; App {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let env = mock_env();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let api = Box::new(MockApi::default());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let bank = BankKeeper::new();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    App::new(api, env.block, bank, Box::new(MockStorage::new()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn contract_counter() -&gt; Box&lt;dyn Contract&lt;Empty&gt;&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let contract = ContractWrapper::new_with_empty(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        execute,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        instantiate,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        query,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Box::new(contract)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn counter_instantiate_msg(count: Uint128) -&gt; InstantiateMsg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    InstantiateMsg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        count: count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[test]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn counter_contract_multi_test() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Create the owner account</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let owner = Addr::unchecked(&quot;owner&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let mut router = mock_app();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let counter_contract_code_id = router.store_code(contract_counter());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Setup the counter contract with an initial count of zero</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let init_msg = InstantiateMsg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        count: Uint128::zero()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Instantiate the counter contract using its newly stored code id </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let mocked_contract_addr = router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .instantiate_contract(counter_contract_code_id, owner.clone(), &amp;init_msg, &amp;[], &quot;counter&quot;, None)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .unwrap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // We can now start executing actions on the contract and querying it as needed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let msg = ExecuteMsg::Increment {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Increment the counter by executing the above prepared msg on the previously setup contract</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let _ = router.execute_contract(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            owner.clone(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mocked_contract_addr.clone(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &amp;msg,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &amp;[],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .unwrap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Query the contract to verify the counter was incremented</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let config_msg =  QueryMsg::Count{};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let count_response: CountResponse = router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .wrap()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .query_wasm_smart(mocked_contract_addr.clone(), &amp;config_msg)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .unwrap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asserteq!(count_response.count, 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Now lets reset the counter with the other ExecuteMsg</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let msg = ExecuteMsg::Reset {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let _ = router.execute_contract(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            owner.clone(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mocked_contract_addr.clone(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &amp;msg,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &amp;[],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .unwrap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // And again use the available contract query to verify the result </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Query the contract to verify the counter was incremented</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let config_msg =  QueryMsg::Count{};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let count_response: CountResponse = router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .wrap()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .query_wasm_smart(mocked_contract_addr.clone(), &amp;config_msg)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .unwrap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asserteq!(count_response.count, 0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="mocking-3rd-party-contracts">Mocking 3rd party contracts<a class="hash-link" href="#mocking-3rd-party-contracts" title="Direct link to heading">â€‹</a></h4><p>If you read the above section you will have a gist of the amount of setup work you will have to do by mocking out your contracts as your mocking and trying to progress with a test you may get caught up when you realise your contracts interact with Terraswap, Anchor or some other service out in the IBC. No biggie right?</p><p>You&#x27;ll start off just trying to mock out one of these services in the exact same way as we did above only to realise, wait, we need access to the code.. the contract code is what we import to get <code>execute, instantiate, query</code>. But then you notice protocols don&#x27;t include their contract code in their rust packages! They only include what you need to interact with them i.e msgs and some helpers.</p><p>All hope is not lost however you can still progress by trying to make a thin mock of whatever service you interact with. The process of doing so is similar to what you will do with mocking your own contracts (described above) except you will need to fill in all the functionality. This is made easier because you can also a smaller ExecuteMsg with only the func you use or a MockQuery handler with only the queries for example. Here is an example of our own mock third-party contract:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn contract_ping_pong_mock() -&gt; Box&lt;dyn Contract&lt;Empty&gt;&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let contract = ContractWrapper::new(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        |deps, _, info, msg: MockExecuteMsg| -&gt; StdResult&lt;Response&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            match msg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                MockExecuteMsg::Receive(Cw20ReceiveMsg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    sender: _,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    amount: _,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    msg,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    let received: PingMsg = from_binary(&amp;msg)?;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    Ok(Response::new()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        .add_attribute(&quot;action&quot;, &quot;pong&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        .set_data(to_binary(&amp;received.payload)?))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }})}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        |_, _, msg: MockQueryMsg| -&gt; StdResult&lt;Binary&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            match msg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                MockQueryMsg::Pair {} =&gt; Ok(to_binary(&amp;mock_pair_info())?),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You get a lot of flexibility when you are defining your own mocked contract. You can throw away things like deps, env, info with <code>_</code> if you never use them and return any responses you want for a given execute msg or query. The challenge then becomes how do I mock out all these services? See <a href="https://github.com/0xFable/cw-terra-test-mocks" target="_blank" rel="noopener noreferrer">cw-terra-test-mocks</a> for some Terra-based mocks.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="platform-specific-variations">Platform Specific Variations<a class="hash-link" href="#platform-specific-variations" title="Direct link to heading">â€‹</a></h2><p>Different chains and hubs in the Cosmos ecosystem may have some variations on how migrations are done on their respective networks. This section will attempt to outline those.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="juno">Juno<a class="hash-link" href="#juno" title="Direct link to heading">â€‹</a></h3><p>Juno uses one of the more recent editions of CosmWasm. As a general practice it is good to keep your <code>cw-multi-test</code> version close to the CosmWasm one but this is not required. Note if you do use different versions you may get varying experiences and things may still change in the most recent version. </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="terra">Terra<a class="hash-link" href="#terra" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="using-a-forked-cw-multi-test">Using a forked <code>cw-multi-test</code><a class="hash-link" href="#using-a-forked-cw-multi-test" title="Direct link to heading">â€‹</a></h4><p>For a lot of use cases, <code>cw-multi-test</code> will work as-is for you and you will have a great time. When writing tests for certain contracts which are UST focused, you may run into issues either sending or querying NativeTokens. The problem here is <code>cw-multi-test</code> is a generic testing tool and Terra has some add-ons needed in order to properly mock it.</p><p>In later versions of <code>cw-multi-test</code> it is possible to register your own querier so if you have the latest you could try to solve this issue yourself alternatively there is a repo here you can depend on which is simply a fork of <code>cw-multi-test</code> with a TerraQuerier added on. This allows for Terra Native coin transactions and is defined as <code>terra-multi-test</code>.</p><p>To use <code>terra-multi-test</code> fork follow these steps:</p><ul><li>Add this dep to your cargo.toml: <code>terra-multi-test = {git=&quot;https://github.com/astroport-fi/terra-plus&quot;, version=&quot;1.0.0&quot;, package = &quot;terra-multi-test&quot;}</code></li><li>Update your tests to now use <code>terra_multi_test</code> instead of <code>cw_multi_test</code></li><li>Away you go</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/InterWasm/docs/edit/main/docs/04-smart-contracts/13-testing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/1.0/smart-contracts/code-pinning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Code Pinning</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/1.0/integration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Integration</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#unit-testing" class="table-of-contents__link toc-highlight">Unit Testing</a></li><li><a href="#integration-testing-with-cw-multi-test" class="table-of-contents__link toc-highlight">Integration Testing with <code>cw-multi-test</code></a></li><li><a href="#cw-multi-test-concepts" class="table-of-contents__link toc-highlight"><code>cw-multi-test</code> concepts</a><ul><li><a href="#app" class="table-of-contents__link toc-highlight">App</a></li><li><a href="#mocking-contracts" class="table-of-contents__link toc-highlight">Mocking contracts</a></li><li><a href="#storing-and-instantiating-a-contract" class="table-of-contents__link toc-highlight">Storing and Instantiating a Contract:</a></li><li><a href="#putting-it-all-together" class="table-of-contents__link toc-highlight">Putting it all together</a></li></ul></li><li><a href="#platform-specific-variations" class="table-of-contents__link toc-highlight">Platform Specific Variations</a><ul><li><a href="#juno" class="table-of-contents__link toc-highlight">Juno</a></li><li><a href="#terra" class="table-of-contents__link toc-highlight">Terra</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Related Documentation</div><ul class="footer__items"><li class="footer__item"><a href="https://cosmos.network/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cosmos SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hub.cosmos.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cosmos Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.tendermint.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Tendermint Core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cosmwasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/wasmd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/wasmd<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cw-plus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cw-plus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/InterWasm/cw-contracts" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>InterWasm/cw-contracts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/InterWasm/cw-awesome" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>InterWasm/cw-awesome<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.cosmwasm.com/chat/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/InterWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>InterWasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 CosmWasm</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5276babc.js"></script>
<script src="/assets/js/main.3f7f342e.js"></script>
</body>
</html>